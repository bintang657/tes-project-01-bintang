<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Tutor SMA ‚Ä¢ Ultimate Super Lengkap</title>
<style>
:root { --bg:#0f172a; --card:#1e293b; --accent:#38bdf8; --text:#e5e7eb; }
body{margin:0;font-family:system-ui,sans-serif;background:var(--bg);color:var(--text);}
header{padding:28px 16px;text-align:center;}
header h1{font-size:1.7rem;}
nav{margin-top:14px;display:flex;justify-content:center;gap:10px;flex-wrap:wrap;}
nav button{background:#334155;color:var(--text);border:none;padding:10px 14px;border-radius:10px;font-weight:600;}
section{max-width:900px;margin:auto;padding:16px;}
.card{background:var(--card);border-radius:16px;padding:20px;margin-bottom:18px;position:relative;}
button{width:100%;padding:12px;margin-top:8px;border:none;border-radius:12px;background:#334155;color:var(--text);font-size:1rem;}
button:hover{background:#475569;}
.ai{color:var(--accent);font-weight:600;}
.music-box{display:flex;align-items:center;gap:12px;margin-top:10px;}
.music-box input[type="range"]{width:100%;}
footer{text-align:center;font-size:0.85rem;opacity:0.7;padding:24px;}
.mood-btns{display:flex;justify-content:center;gap:8px;margin:12px 0;}
.mood-btns button{width:auto;padding:6px 12px;}
.progress-bar{background:#334155;border-radius:12px;overflow:hidden;height:20px;margin-top:8px;}
.progress-fill{background:var(--accent);height:100%;width:0%;transition:width 0.5s;}
.timer{position:absolute;top:10px;right:10px;background:#475569;padding:4px 8px;border-radius:8px;}
.leaderboard{background:#1e293b;padding:12px;border-radius:12px;margin-top:10px;}
.leaderboard h3{margin-top:0;}
</style>
</head>
<body>

<header>
<h1>AI Tutor SMA Ultimate Super Lengkap</h1>
<p>Platform belajar adaptif dengan musik & AI Tutor</p>
<nav>
  <button onclick="loadJalur('teknik')">Teknik</button>
  <button onclick="loadJalur('kesehatan')">Kesehatan</button>
  <button onclick="loadJalur('kedinasan')">Kedinasan</button>
  <button onclick="loadJalur('soshum')">Soshum</button>
</nav>
<div class="mood-btns">
  <button onclick="setMood('fokus')">üéØ Fokus</button>
  <button onclick="setMood('energik')">‚ö° Energik</button>
  <button onclick="setMood('santai')">üåø Santai</button>
</div>
</header>

<section class="card">
<p class="ai">AI Tutor</p>
<p id="aiMessage"></p>
<div class="progress-bar"><div id="progressFill" class="progress-fill"></div></div>
<p id="progress"></p>

<div class="music-box">
<button id="musicBtn">‚ñ∂Ô∏è Play Music</button>
<input type="range" min="0" max="1" step="0.01" id="volumeControl">
</div>

<div id="leaderboard" class="leaderboard">
<h3>Leaderboard Lokal</h3>
<ul id="lbList"></ul>
</div>
</section>

<section id="lesson"></section>

<footer>
<p>AI Learning Platform SMA Ultimate Super Lengkap</p>
<p>Dibuat oleh <strong>Star Xl-B1</strong></p>
</footer>

<audio id="bgm" loop></audio>

<script>
// ===== PLAYLIST =====
const playlists = {
  teknik: [...Array(10).keys()].map(i => "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-"+(i+1)+".mp3"),
  kesehatan: [...Array(10).keys()].map(i => "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-"+(i+11)+".mp3"),
  kedinasan: [...Array(10).keys()].map(i => "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-"+(i+21)+".mp3"),
  soshum: [...Array(10).keys()].map(i => "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-"+(i+31)+".mp3")
};

// ===== SUPER LENGKAP SOAL =====
const bankSoal = {
  teknik: [
    {q:"Sebuah algoritma memiliki kompleksitas O(n log n). Mana yang termasuk?", 
     a:["Insertion Sort","Heap Sort","Selection Sort"], c:1,
     e:"Heap Sort termasuk algoritma O(n log n)."},
    {q:"Manakah yang bukan prinsip desain perangkat lunak SOLID?",
     a:["Single Responsibility","Open/Closed","Fast Shipment"], c:2,
     e:"Fast Shipment bukan bagian prinsip SOLID."},
    {q:"Dalam sistem embedded, apa itu interrupt?",
     a:["Metode error","Sinyal berhenti sementara","Proses utama"], c:1,
     e:"Interrupt menghentikan sementara proses utama untuk tangani kejadian tertentu."},
    {q:"Apa itu deadlock dalam pemrograman paralel?",
     a:["Keadaan saling tunggu tanpa akhir","Loop infiniti","Proses cepat selesai"], c:0,
     e:"Deadlock adalah keadaan dimana dua proses saling menunggu tanpa akhir."},
    {q:"Manakah yang merupakan struktur data tree-balanced?",
     a:["BST sederhana","Red-Black Tree","Linked List"], c:1,
     e:"Red-Black Tree adalah balanced tree."}
  ],
  kesehatan: [
    {q:"Dalam sistem imun, apa fungsi limfosit T?",
     a:["Hasilkan hormon","Kenali & hancurkan sel asing","Hantar oksigen"], c:1,
     e:"Limfosit T mengenali dan menghancurkan sel asing."},
    {q:"Hemostasis bertanggung jawab untuk‚Ä¶",
     a:["Menghentikan pendarahan","Meningkatkan suhu tubuh","Mengurangi denyut jantung"], c:0,
     e:"Hemostasis menghentikan pendarahan melalui pembekuan darah."},
    {q:"Manakah enzym penting dalam pencernaan protein?",
     a:["Amilase","Lipase","Pepsin"], c:2,
     e:"Pepsin memecah protein di lambung."},
    {q:"Apa peran nephron di ginjal?",
     a:["Produksi hormon","Filtrasi darah","Pengaturan suhu"], c:1,
     e:"Nephron melakukan filtrasi darah di ginjal."},
    {q:"Defisiensi vitamin D menyebabkan‚Ä¶",
     a:["Rabun jauh","Rakhitis","Diabetes"], c:1,
     e:"Rakhitis pada anak akibat kekurangan vitamin D."}
  ],
  kedinasan: [
    {q:"Makna Pancasila sila ke-3 adalah‚Ä¶",
     a:["Persatuan Indonesia","Kerakyatan","Persatuan"], c:2,
     e:"Sila ke-3 adalah Persatuan Indonesia."},
    {q:"Apa itu UUD 1945 amandemen?",
     a:["Perubahan konstitusi","Hapuskan hukum","Abolisi pemerintahan"], c:0,
     e:"Amandemen berarti perubahan/penyesuaian konstitusi."},
    {q:"Apa tujuan tes potensi akademik?",
     a:["Nilai fisik","Kemampuan berpikir","Kecepatan mengetik"], c:1,
     e:"Tes potensi akademik menilai kemampuan berpikir."},
    {q:"Apa arti Bhinneka Tunggal Ika?",
     a:["Berbeda-beda satu tujuan","Berbeda tapi tetap satu","Sama persis"], c:1,
     e:"Bhinneka Tunggal Ika berarti berbeda tetapi tetap satu."},
    {q:"Sistem pemerintahan Indonesia adalah‚Ä¶",
     a:["Monarki","Republik","Federasi"], c:1,
     e:"Indonesia adalah negara Republik."}
  ],
  soshum: [
    {q:"Dalam ekonomi mikro, elastisitas permintaan berarti‚Ä¶",
     a:["Responsif terhadap perubahan harga","Tidak responsif","Jumlah tetap"], c:0,
     e:"Elastisitas permintaan adalah responsif terhadap perubahan harga."},
    {q:"Teori konflik dalam sosiologi menjelaskan‚Ä¶",
     a:["Kesetaraan sosial","Pertentangan antara kelompok","Kemajuan teknologi"], c:1,
     e:"Teori konflik menitikberatkan pertentangan kelompok."},
    {q:"Era Renaissance ditandai dengan‚Ä¶",
     a:["Kemajuan seni & ilmu","Perang besar","Perubahan iklim"], c:0,
     e:"Renaissance dikenal dengan kemajuan seni dan ilmu pengetahuan."},
    {q:"Hukum permintaan menjelaskan‚Ä¶",
     a:["Permintaan turun saat harga naik","Permintaan naik saat harga naik","Harga tetap"], c:0,
     e:"Harga naik ‚Üí permintaan turun."},
    {q:"Apa fungsi GDP dalam ekonomi?",
     a:["Mengukur produksi negara","Mengatur pajak","Menentukan kurs"], c:0,
     e:"GDP mengukur nilai total produksi barang dan jasa suatu negara."}
  ]
};

// ===== STATE =====
let currentPlaylist=[], currentIndex=0, currentJalur="";
const bgm=document.getElementById("bgm");
const musicBtn=document.getElementById("musicBtn");
const volumeControl=document.getElementById("volumeControl");

let musicState=JSON.parse(localStorage.getItem("music"))||{playing:false,volume:0.3};
bgm.volume=musicState.volume;
volumeControl.value=musicState.volume;

let state=JSON.parse(localStorage.getItem("aiState"))||{level:1,xp:0,benar:0,salah:0,soalCount:0};

let timerInterval;

// ===== AI & PROGRESS =====
function updateAI(msg){
  document.getElementById("aiMessage").innerText=msg;
  document.getElementById("progress").innerText=`Level ${state.level} ‚Ä¢ XP ${state.xp}/100 ‚Ä¢ Benar ${state.benar} ‚Ä¢ Salah ${state.salah}`;
  document.getElementById("progressFill").style.width = Math.min(state.xp,100)+"%";
  updateLeaderboard();
}

// ===== LEADERBOARD =====
function updateLeaderboard(){
  const lb = JSON.parse(localStorage.getItem("leaderboard")||"{}");
  const lbList = document.getElementById("lbList");
  lbList.innerHTML="";
  if(!lb[currentJalur]) lb[currentJalur]=[];
  lb[currentJalur].push(state.xp);
  lb[currentJalur] = lb[currentJalur].sort((a,b)=>b-a).slice(0,5);
  localStorage.setItem("leaderboard",JSON.stringify(lb));
  lb[currentJalur].forEach((v,i)=>{lbList.innerHTML+=`<li>#${i+1}: ${v} XP</li>`;});
}

// ===== LOAD JALUR & TIMER =====
function loadJalur(jalur){
  clearInterval(timerInterval);
  currentJalur = jalur;
  currentPlaylist = playlists[jalur];
  currentIndex = 0;
  bgm.src = currentPlaylist[currentIndex];
  if(musicState.playing){bgm.play().catch(e=>console.log("Klik tombol play untuk mendengar musik")); musicBtn.innerText="‚è∏Ô∏è Pause Music";}

  let soal;
  if(state.soalCount>0 && state.soalCount%3===0){
    soal = {q:"SOAL BONUS: Tingkat lanjut, jawaban lebih kompleks‚Ä¶", a:["Pilihan X","Pilihan Y","Pilihan Z"], c:1, e:"Jawaban bonus benar!"};
  } else{
    soal = bankSoal[jalur][Math.floor(Math.random()*bankSoal[jalur].length)];
  }
  state.soalCount++;

  const jawaban = soal.a.map((text,i)=>({text,index:i}));
  for(let i=jawaban.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[jawaban[i],jawaban[j]]=[jawaban[j],jawaban[i]];}

  updateAI(`Saya akan membimbing kamu di jalur ${jalur}. Fokus dan jawab dengan tenang.`);

  document.getElementById("lesson").innerHTML = `
    <div class="card">
      <div class="timer" id="timer">30</div>
      <h2>${jalur.toUpperCase()}</h2>
      <p>${soal.q}</p>
      ${jawaban.map(j=>`<button onclick="jawab(${j.index},${soal.c},'${soal.e}',${state.soalCount%3===0})">${j.text}</button>`).join("")}
      <p id="feedback" class="ai"></p>
    </div>
  `;

  let t=30;
  const timerEl=document.getElementById("timer");
  timerEl.innerText=t;
  timerInterval=setInterval(()=>{
    t--;
    timerEl.innerText=t;
    if(t<=0){clearInterval(timerInterval);document.getElementById("feedback").innerText="Waktu habis! Salah otomatis.";state.salah++;updateAI("Ayo semangat lanjut soal berikutnya!");localStorage.setItem("aiState",JSON.stringify(state));}
  },1000);
}

// ===== JAWABAN =====
function jawab(p,c,e,isBonus=false){
  clearInterval(timerInterval);
  const fb=document.getElementById("feedback");
  const xpGain = isBonus ? 50 : 25;
  if(p===c){state.xp+=xpGain;state.benar++;fb.innerText=`Benar! ${e}`;}
  else{state.salah++;fb.innerText=`Salah! ${e}`;}
  if(state.xp>=100){state.xp=state.xp-100;state.level++;updateAI("Level meningkat! Soal akan menyesuaikan.");}
  else{updateAI("Siap lanjut soal berikutnya.");}
  localStorage.setItem("aiState",JSON.stringify(state));
  loadJalur(currentJalur);
}

// ===== MUSIC CONTROL =====
musicBtn.onclick = () => {
  if(bgm.paused){bgm.play().catch(e=>console.log("Klik tombol play untuk dengar musik"));musicBtn.innerText="‚è∏Ô∏è Pause Music";musicState.playing=true;}
  else{bgm.pause();musicBtn.innerText="‚ñ∂Ô∏è Play Music";musicState.playing=false;}
  localStorage.setItem("music",JSON.stringify(musicState));
};
volumeControl.oninput = () => {bgm.volume=volumeControl.value;musicState.volume=volumeControl.value;localStorage.setItem("music",JSON.stringify(musicState));};
bgm.onended = () => {if(currentPlaylist.length>0){currentIndex=(currentIndex+1)%currentPlaylist.length;bgm.src=currentPlaylist[currentIndex];bgm.play().catch(e=>console.log("Klik tombol play untuk dengar musik"));}}; 

// ===== MOOD MODE =====
function setMood(mode){
  if(mode==='fokus'){document.body.style.background="#0a0f1b";document.body.style.color="#e5e7eb";}
  else if(mode==='energik'){document.body.style.background="#1a1f33";document.body.style.color="#facc15";}
  else if(mode==='santai'){document.body.style.background="#123456";document.body.style;color="#a5f3fc";}
  localStorage.setItem("mood",mode);
}
const savedMood=localStorage.getItem("mood"); if(savedMood) setMood(savedMood);
updateAI("Halo! AI Tutor siap bantu belajar mu.");
</script>

</body>
</html>
